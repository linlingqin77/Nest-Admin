# 测试账户说明

本文档详细说明 Nest-Admin-Soybean 系统中的测试账户配置和使用方法。

## 账户列表

| 账户类型 | 用户名 | 密码 | 租户ID | 说明 |
|---------|--------|------|--------|------|
| 超级管理员 | `admin` | `admin123` | `000000` | 拥有所有权限，可管理所有租户 |
| 演示账户 | `demo` | `demo123` | `000000` | 只读权限，适合产品演示 |
| 测试账户 | `test` | `test123` | `000000` | 部分权限，用于功能测试 |

## 演示账户详情

演示账户专为产品演示和功能体验设计，具有以下特点：

### 权限范围

**可访问的功能模块（21个）：**

1. 首页仪表盘
2. 用户管理
3. 角色管理
4. 菜单管理
5. 部门管理
6. 岗位管理
7. 字典管理
8. 参数配置
9. 通知公告
10. 操作日志
11. 登录日志
12. 在线用户
13. 定时任务
14. 服务监控
15. 缓存监控
16. 租户管理
17. 租户套餐
18. 文件管理
19. 代码生成
20. 系统接口
21. 表单构建

### 权限类型

| 权限类型 | 数量 | 说明 |
|---------|------|------|
| 查询权限 | 16 | 可查看所有模块的列表和详情 |
| 导出权限 | 10 | 可导出数据到 Excel |
| 预览权限 | 1 | 可预览文件 |
| **总计** | **27** | 只读操作权限 |

### 限制说明

演示账户**不能**执行以下操作：

- ❌ 新增任何数据
- ❌ 修改任何数据
- ❌ 删除任何数据
- ❌ 上传文件
- ❌ 执行定时任务
- ❌ 强制下线用户
- ❌ 清空缓存
- ❌ 修改系统配置

### 安全机制

1. **RBAC 权限控制**: 基于角色的访问控制，演示角色只分配只读权限
2. **API 拦截**: 后端拦截所有写操作请求
3. **租户隔离**: 数据受租户机制保护，无法访问其他租户数据
4. **操作审计**: 所有操作都会被记录到操作日志

## 超级管理员账户

超级管理员账户拥有系统的最高权限：

### 特殊权限

- ✅ 管理所有租户
- ✅ 跨租户查询数据
- ✅ 系统配置管理
- ✅ 用户权限分配
- ✅ 菜单权限配置

### 注意事项

- 超级管理员租户 ID 为 `000000`
- 建议在生产环境修改默认密码
- 敏感操作会记录到审计日志

## 测试账户

测试账户用于功能测试，拥有部分权限：

### 权限范围

- 用户管理（增删改查）
- 角色管理（查看）
- 部门管理（增删改查）
- 岗位管理（增删改查）
- 字典管理（查看）
- 文件上传

### 使用场景

- 功能测试
- 接口调试
- 开发验证

## 快速登录

### 前端登录页

登录页面提供快速填充功能：

1. 点击「演示账户」按钮自动填充演示账户信息
2. 点击「管理员」按钮自动填充管理员账户信息

### API 登录

```bash
# 演示账户登录
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -H "x-tenant-id: 000000" \
  -d '{"userName": "demo", "password": "demo123"}'

# 管理员登录
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -H "x-tenant-id: 000000" \
  -d '{"userName": "admin", "password": "admin123"}'
```

## 初始化账户

如果需要重新初始化测试账户，可以执行：

```bash
cd server

# 方式一：使用脚本
./scripts/init-demo.sh

# 方式二：直接执行
pnpm exec ts-node scripts/init-demo-account.ts

# 方式三：重置整个数据库
pnpm prisma:seed
```

## 自定义测试账户

如需创建自定义测试账户，可以：

1. 使用管理员账户登录系统
2. 进入「系统管理」→「用户管理」
3. 点击「新增」创建用户
4. 进入「系统管理」→「角色管理」
5. 创建或选择角色，分配相应权限
6. 回到用户管理，为用户分配角色

## 常见问题

### Q: 演示账户无法登录？

1. 确认租户 ID 填写正确（`000000`）
2. 确认密码正确（`demo123`）
3. 检查账户是否被禁用
4. 查看后端日志排查问题

### Q: 如何修改演示账户权限？

1. 使用管理员账户登录
2. 进入「系统管理」→「角色管理」
3. 找到「演示角色」进行编辑
4. 调整菜单权限后保存

### Q: 演示账户数据会被其他人修改吗？

不会。演示账户只有只读权限，无法修改任何数据。同时，数据受租户隔离保护。

## 相关文档

- [快速开始](/guide/quick-start) - 项目启动指南
- [RBAC 权限系统](/guide/rbac) - 权限系统详解
- [多租户架构](/guide/multi-tenant) - 租户隔离机制
